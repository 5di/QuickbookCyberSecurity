## DOS {#dos}

拒绝服务，英文为&quot;Denial of Service&quot;，也就是我们常说的DoS。那什么又是拒绝服务呢？大家可以这样理解，凡是能导致合法用户不能进行正常的网络服务的行为都算是拒绝服务攻击。拒绝服务攻击的目的非常的明确，就是要阻止合法用户对正常网络资源的访问，从而达到攻击者不可告人的目的。

简单的讲，拒绝服务就是用超出被攻击目标处理能力的海量数据包消耗可用系统、带宽资源，致使网络服务瘫痪的一种攻击手段。在早期，拒绝服务攻击主要是针对处理能力比较弱的单机，如个人PC，或是窄带宽连接的网站，对拥有高带宽连接，高性能设备的网站影响不大。

在1999年底，伴随着DDoS的出现，高端网站高枕无忧的局面不复存在。DDoS实现是借助数百，甚至数千台被植入攻击守护进程的攻击主机同时发起的集团作战行为。因此，分布式拒绝服务也被称之为&quot;洪水攻击&quot;。常见的DDoS攻击手法有UDP Flood、SYN Flood、ICMP Flood、TCP Flood、Proxy Foold等等。 DDoS攻击原理图如下：

DDOS攻击的简单分类

1.基于操作系统/应用软件漏洞的应用层D-DoS攻击：

四两拨千斤的攻击方式，发送少量数据导致攻击目标系统资源被大幅占用，以达到拒绝服务的目的。在某些情况下，甚至一台攻击机即可完成这类攻击。

2.基于IP协议漏洞的网络层D-DoS攻击：

最常见的攻击方式，利用TCP协议的漏洞，导致攻击目标的系统资源被大幅占用。需要一定规模的傀儡机才能达到较好的拒绝服务效果。

3.面向网络资源的D-DoS攻击    

最难以防范的攻击方式。攻击者通过控制大量傀儡机同时发送正常报文，导致攻击目标之前的网络带宽、路由器、防火墙或防D-DoS网关甚至服务器本身的资源耗尽。需要控制极大规模的傀儡机或大量服务器才能达到资源占用的效果。原理图如下：

DDoS是一种特殊形式的拒绝服务攻击，所以对付它是一个系统工程，想仅仅依靠某种系统或产品防范DDoS是不现实的。可以肯定的是，要想完全杜绝 DDoS目前是不可能的，但是通过适当的措施抵御90%的DDoS攻击是可以做到的。对于此类隐蔽性极好的DDoS攻击的防范，更重要的是用户要加强安全防范意识，提高网络系统的安全性。

+++

　　CC = Challenge Collapsar，其前身名为Fatboy攻击，Collapsar(黑洞) 是绿盟科技的一款抗DDOS产品品牌，在对抗拒绝服务攻击的领域内具有比较高的影响力和口碑。 因此，存在这样一种拒绝攻击行为，可以将受到Collapsar （黑洞）防火墙保护的网站击溃，因此攻击发起者挑衅式的将其更名为Challenge Collapsar 攻击，简称CC攻击。

攻击原理

　　CC攻击的原理并不复杂，其主要思路是基于应用层的弱点进行攻击；传统的拒绝服务攻击，如Syn flood 主要是基于协议层和服务层的弱点开展攻击，早期的抗拒绝服务攻击产品也是基于此进行防护。而应用层的弱点，取决于各自应用平台的开发能力，因此难以具有通用性的防护方案，这也是CC攻击没有很好的防护产品，非常容易得手的原因。

　　简单举例，一个论坛系统，如果存在较多的分页，当一个蜘蛛程序，多并发高频次的进行大量翻页抓取时，已经产生了一种CC攻击。

　　应用层常见SQL代码范例如下(以php为例)

　　$sql=&quot;select * from post where tagid=&amp;apos;$tagid&amp;apos; order by postid desc limit $start ,30&quot;;

　　当post表数据庞大，翻页频繁，$start数字急剧增加时，查询影响结果集=$start+30; 该查询效率呈现明显下降趋势，而多并发频繁调用，因查询无法立即完成，资源无法立即释放，会导致数据库请求连接过多，导致数据库阻塞，网站无法正常打开。

　　性能不够优良的数据查询，不良的程序执行结构，比较消耗资源的功能，都可能成为CC攻击的目标，而执行方法可能是单机发起，也可能是通过肉鸡发起，还有可能通过高流量站点嵌入脚本（iframe嵌入或js嵌入）发起，基于高流量网站嵌入攻击代码的CC攻击，在目前互联网环境上来讲，更加无解。

　　CC攻击可以归为DDoS攻击的一种。他们之间都原理都是一样的，即发送大量的请求数据来导致服务器拒绝服务，是一种连接攻击。CC攻击又可分为代理 CC攻击，和肉鸡CC攻击。代理CC攻击是黑客借助代理服务器生成指向受害主机的合法网页请求，实现DOS，和伪装就叫：cc（ChallengeCollapsar）。而肉鸡CC攻击是黑客使用CC攻击软件，控制大量肉鸡，发动攻击，相比来后者比前者更难防御。因为肉鸡可以模拟正常用户访问网站的请求。伪造成合法数据包。防御CC攻击可以通过多种方法，禁止网站代理访问，尽量将网站做成静态页面，限制连接数量等。